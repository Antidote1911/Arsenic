language: cpp
sudo: required
dist: trusty

addons:
#  coverity_scan:
#    project:
#      name: "AraHaan/bin2c"
#      version: 0.15.0
#      description: "bin2c Conversion Tool."

    apt:
        sources:
            - ubuntu-toolchain-r-test
            - llvm-toolchain-precise-3.9
        packages:
            - g++-6
            - clang-3.9

    notification_email: none
#    build_command_prepend: " -O3 -std=c++14"
#    build_command: $CXX
#    branch_pattern: coverity_scan

matrix:
  include:
    - compiler: gcc
      env: COMPILER=g++-6

    - compiler: clang
      env: COMPILER=clang++-3.9

before_install:
    
    
install:
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - if [ "$TRAVIS_OS_NAME" = "linux"  ]; then sudo apt-get -qq update;    fi
  - sudo add-apt-repository -y ppa:beineri/opt-qt58-trusty
  - sudo apt-get update -qq
  - export QMAKE=/usr/lib/x86_64-linux-gnu/qt5/bin/qmake
  - sudo apt-get install -qq cmake qt58base qt58declarative qt58graphicaleffects qt58quickcontrols2
  - source /opt/qt58/bin/qt58-env.sh

before_script:
  - export PATH=$PATH:/opt/qt58/bin
  - if [ "$COMPILER" = "g++-6"        ]; then export CXX="g++-6" CC="gcc-6";              fi
  - if [ "$COMPILER" = "clang++-3.9"  ]; then export CXX="clang++-3.9" CC="clang-3.9";    fi
    
script:
  - qmake --version
  - qmake -project
  - qmake arsenic.pro
  - make
